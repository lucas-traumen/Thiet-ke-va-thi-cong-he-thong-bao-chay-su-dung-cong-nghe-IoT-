<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Bแบฃng ฤiแปu khiแปn hแป thแปng cแบฃnh bรกo chรกy</title>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>๐ฅ Bแบฃng ฤiแปu khiแปn hแป thแปng cแบฃnh bรกo chรกy</h1>
  <div id="connection-status">โณ ฤรฃ khแปi tแบกo</div>

  <div id="book-container">
    <div id="page-dashboard" class="page">
      <div id="dashboard-wrap">
        <div id="single-device-placeholder"></div>
      </div>
    </div>

    <div id="page-charts" class="page">
      <button id="btn-back-to-dash">โฌ Quay lแบกi Dashboard</button>
      <h2 id="charts-title">๐ Biแปu ฤแป dแปฏ liแปu</h2>

      <div class="chart-wrapper">
        <h3>Nhiแปt ฤแป</h3>
        <div class="chart-container"><canvas id="chart-temp"></canvas></div>
      </div>

      <div class="chart-wrapper">
        <h3>ฤแป แบฉm</h3>
        <div class="chart-container"><canvas id="chart-hum"></canvas></div>
      </div>

      <div class="chart-wrapper">
        <h3>Gas</h3>
        <div class="chart-container"><canvas id="chart-smoke"></canvas></div>
      </div>
    </div>
  </div>

  <template id="device-template">
    <div class="device-card" role="region" aria-label="Device card">
      <div class="device-header">
        <h3 class="device-id">--</h3>
        <span class="device-status offline">offline</span>
      </div>

      <div class="telemetry">
        <p>๐ก๏ธ Nhiแปt ฤแป: <strong><span class="data-temp">--</span> ยฐC</strong></p>
        <p>๐ง ฤแป แบฉm: <strong><span class="data-hum">--</span> %</strong></p>
        <p>๐จ Gas: <strong><span class="data-smoke">--</span> ppm</strong></p>
        <p>โ๏ธ ROR: <strong><span class="data-ror">--</span> ยฐC/phรบt</strong></p>
        <p>๐ฅ Bรกo ฤแปng: <strong><span class="data-alarm">--</span></strong></p>
      </div>

      <div class="controls">
        <h4>ฤiแปu khiแปn</h4>
        
        <div class="btn-row">
          <button class="btn btn-alarm-clear">Xรณa Bรกo ฤแปng</button>
        </div>
        
        <div class="btn-row">
          <button class="btn btn-led-on" data-cmd="led" data-val="on">Bแบญt LED</button>
          <button class="btn btn-led-off" data-cmd="led" data-val="off">Tแบฏt LED</button>
          <button class="btn btn-led-auto" data-cmd="mode_auto" data-val="auto">LED Auto</button>
        </div>

        <div class="btn-row">
          <button class="btn btn-buzzer-unmute" data-cmd="buzzer" data-val="on">Bแบญt Cรฒi</button>
          <button class="btn btn-buzzer-mute" data-cmd="buzzer" data-val="off">Tแบฏt Cรฒi</button>
        </div>

        <div style="margin-top:12px;">
          <button class="btn btn-charts">๐ Xem Biแปu ฤแป</button>
          <button class="btn btn-history">๐ Xem Lแปch Sแปญ</button>
        </div>

        <div class="ack-message" aria-live="polite"></div>
      </div>
      </div>
  </template>

  <div id="history-modal">
  <div id="history-box">
    <button id="close-history">ฤรณng</button>
    <h3 id="history-title">Lแปch sแปญ</h3>
    <div id="history-content"></div>
    <button id="load-more-history" style="display:none; margin-top:10px;">Tแบฃi thรชm</button>
  </div>
</div>

  <script src="app.js"></script>
</body>
</html>